<!--
  Generated template for the ChatPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>
  <wagdag-header [title]="pageTitle" [search]="false"></wagdag-header>
</ion-header>

<ion-content padding fixed scrollDownOnLoad="true" (tap)="contentMouseDown($event)" ionScrollEnd="hideKeybaord()">
  <ion-list no-lines style="padding-bottom: 10px">
      <div *ngFor="let message of messages">
        <ion-item *ngIf="message" [class.received]="message.senderId != myProfile.id" [class.sent]="message.senderId == myProfile.id" >
          <ion-avatar item-left *ngIf="message.senderId == friendProfile.id">
            <img src="{{friendProfile.avatar}}">
          </ion-avatar>
          <p *ngIf="message.senderId == friendProfile.id" item-left class="message-content">{{message.msg}}</p>
          <p *ngIf="message.senderId == myProfile.id" item-right text-right class="message-content">{{message.msg}}</p>
        </ion-item>
      </div>
    </ion-list>
</ion-content>

<ion-footer (touchstart)="footerTouchStart($event)">
	<ion-toolbar>

		<!--<ion-buttons left>
			<button class="add-image-button" item-right (touchstart)="touchImageButton($event)">
				 <ion-icon class="add-image-icon" name="images"></ion-icon>
	        </button>
		</ion-buttons>-->

		<textarea spellcheck="true" autoComplete="true" autocorrect="true" (ngModelChange)="textAreaChange()" rows="1" fz-elastic
			class="chat-input" [(ngModel)]="yourMessage" placeholder="Write a message..." (keyup.enter)="sendMessage()">
		</textarea>

    <ion-buttons end>
      <button [disabled]="!yourMessage" class="send-button" id="send-button" ion-button icon-right color="white" (tap)="touchSendButton($event)">
        <ion-icon class="send-icon" name="paw"></ion-icon>
      </button>
    </ion-buttons>

	</ion-toolbar>
</ion-footer>

